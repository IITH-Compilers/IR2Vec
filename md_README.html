<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IR2Vec: IR2Vec</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IR2Vec
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">IR2Vec</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md29"></a></p>
<p><code>IR2Vec</code> is a LLVM IR based framework to generate distributed representations for the source code in an unsupervised manner, which can be used to represent programs as input to solve machine learning tasks that take programs as inputs.</p>
<p>This repo contains the source code and relevant information described in the <a href="https://doi.org/10.1145/3418463">paper</a> (<a href="https://arxiv.org/abs/1909.06228">arXiv</a>). Please see <a href="https://compilers.cse.iith.ac.in/projects/ir2vec/">here</a> for more details.</p>
<blockquote class="doxtable">
<p>IR2Vec: LLVM IR Based Scalable Program Embeddings, S. VenkataKeerthy, Rohit Aggarwal, Shalini Jain, Maunendra Sankar Desarkar, Ramakrishna Upadrasta, and Y. N. Srikant </p>
</blockquote>
<p><a href="https://github.com/llvm/llvm-project/releases/tag/llvmorg-18.1.8"><img src="https://img.shields.io/badge/LLVM-v18.1.8-blue" alt="LLVM" class="inline"/></a> <a href="https://pypi.org/project/IR2Vec/"><img src="https://img.shields.io/pypi/v/IR2Vec" alt="PyPI Version" class="inline"/></a> <img src="https://github.com/IITH-Compilers/IR2Vec/workflows/Tests/badge.svg" alt="Tests" style="pointer-events: none;" class="inline"/> <img src="https://github.com/IITH-Compilers/IR2Vec/workflows/Publish/badge.svg" alt="Publish" style="pointer-events: none;" class="inline"/> <img src="https://github.com/IITH-Compilers/IR2Vec/workflows/pre-commit%20checks/badge.svg" alt="pre-commit checks" style="pointer-events: none;" class="inline"/></p>
<p><img src="images/ir2vec.jpg" alt="Image" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md30"></a>
LLVM Version Archive</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">LLVM Version   </th><th class="markdownTableHeadNone">Branch    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LLVM 19.1.7   </td><td class="markdownTableBodyNone"><a href="https://github.com/IITH-Compilers/IR2Vec">main</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LLVM 18.1.8   </td><td class="markdownTableBodyNone"><a href="https://github.com/IITH-Compilers/IR2Vec/tree/llvm18">llvm18</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LLVM 17.0.6   </td><td class="markdownTableBodyNone"><a href="https://github.com/IITH-Compilers/IR2Vec/tree/llvm17">llvm17</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LLVM 16.0.1   </td><td class="markdownTableBodyNone"><a href="https://github.com/IITH-Compilers/IR2Vec/tree/llvm16">llvm16</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LLVM 14.0.1   </td><td class="markdownTableBodyNone"><a href="https://github.com/IITH-Compilers/IR2Vec/tree/llvm14">llvm14</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LLVM 12.0.0   </td><td class="markdownTableBodyNone"><a href="https://github.com/IITH-Compilers/IR2Vec/tree/llvm12">llvm12</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LLVM 10.0.1   </td><td class="markdownTableBodyNone"><a href="https://github.com/IITH-Compilers/IR2Vec/tree/llvm10">llvm10</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LLVM 8.0.1   </td><td class="markdownTableBodyNone"><a href="https://github.com/IITH-Compilers/IR2Vec/tree/llvm8">llvm8</a>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md31"></a>
Table Of Contents</h1>
<ul>
<li>IR2Vec<ul>
<li>LLVM Version Archive</li>
<li>Table Of Contents</li>
<li>Installation</li>
<li>Python</li>
<li>Cpp</li>
<li>Requirements</li>
<li>Building from source</li>
<li>Generating program representations<ul>
<li>Using Binary<ul>
<li>Command-Line options</li>
<li>Flow-Aware Embeddings</li>
<li>Symbolic Embeddings</li>
</ul>
</li>
</ul>
</li>
<li>Using Libraries</li>
<li>Using Python package (IR2Vec-Wheels)<ul>
<li>Initialization -ir2vec.initEmbedding</li>
<li>getProgramVector</li>
<li>getFunctionVectors</li>
<li>getInstructionVectors</li>
</ul>
</li>
<li>Example</li>
<li>Binaries, Libraries and Wheels - Artifacts</li>
<li><a class="el" href="dir_3b1ed92bc488ccb705d7c31ec9add70b.html">Experiments</a><ul>
<li>Note</li>
</ul>
</li>
<li>Citation</li>
<li>Contributions</li>
<li>License</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md32"></a>
Installation</h1>
<p><code>IR2Vec</code> can be installed in different ways to accommodate individual preferences and requirements effectively. You may select to install via a user-friendly Python wheel setup if you are a Python user, or opt for a C++ based installation if you are looking to integrate with a compiler pass or necessitate advanced control and enhanced integration capabilities. The detailed setup steps are mentioned in the following sections.</p>
<h1><a class="anchor" id="autotoc_md33"></a>
Python</h1>
<p>If you prefer working with Python, you can easily install <code>IR2Vec</code> using <code>pip</code>.</p>
<div class="fragment"><div class="line">pip install -U ir2vec</div>
</div><!-- fragment --><p> Now, you can import and use IR2Vec in your Python projects. Make sure you have a good understanding of Python and its package management system.</p>
<p>We are actively working on improving the Python interfaces and providing better support. If you find any good-to-have interfaces that you may need for your use case missing, please feel free to raise a request.</p>
<h1><a class="anchor" id="autotoc_md34"></a>
Cpp</h1>
<p>If you're a C++ developer and require low-level control, optimization, or integration with C++ projects, you can build <code>IR2Vec</code> from source. First, ensure the below requirements are satisfied, then follow the steps mentioned in the Building from source section.</p>
<h1><a class="anchor" id="autotoc_md35"></a>
Requirements</h1>
<ul>
<li>cmake (&gt;= 3.13.4)</li>
<li>GNU Make (4.2.1)</li>
<li>LLVM (19.1.7) - <a href="https://github.com/llvm/llvm-project/tree/release/17.x">src</a>, <a href="https://releases.llvm.org/download.html#19.1.7">release</a><ul>
<li>Support for latest LLVM versions would be added soon</li>
</ul>
</li>
<li>Eigen library (3.3.7) (Optional)</li>
<li>Python (3.6.7)</li>
<li>Other python requirements<ul>
<li>For training the vocabulary are available in <a href="./seed_embeddings/OpenKE/requirements.txt">seed_embeddings/OpenKE/requirements.txt</a>, and</li>
<li>For running experiments are available in <a href="./experiments/exp_requirements.yaml">experiments/exp_requirements.yaml</a></li>
<li>Conda/Anaconda based virtual environment is assumed</li>
</ul>
</li>
<li>LIT and FileCheck<ul>
<li>To install LIT, run <code>pip3 install --user lit</code></li>
<li>To install FileCheck, run <code>pip3 install --user filecheck</code></li>
</ul>
</li>
</ul>
<p>(Experiments are done on an Ubuntu 20.04 machine)</p>
<h1><a class="anchor" id="autotoc_md36"></a>
Building from source</h1>
<ol type="1">
<li><code>mkdir build &amp;&amp; cd build</code></li>
<li>IR2Vec uses Eigen library. If your system already have Eigen (3.3.7) setup, you can skip this step.<ol type="a">
<li>Download and extract the released version.<ul>
<li><code>wget <a href="https://gitlab.com/libeigen/eigen/-/archive/3.3.7/eigen-3.3.7.tar.gz">https://gitlab.com/libeigen/eigen/-/archive/3.3.7/eigen-3.3.7.tar.gz</a></code></li>
<li><code>tar -xvzf eigen-3.3.7.tar.gz</code></li>
</ul>
</li>
<li><code>mkdir eigen-build &amp;&amp; cd eigen-build</code></li>
<li><code>cmake ../eigen-3.3.7 &amp;&amp; make</code></li>
<li><code>cd ../</code></li>
</ol>
</li>
<li><code>cmake -DLT_LLVM_INSTALL_DIR=&lt;path_to_LLVM_build_dir&gt; -DEigen3_DIR=&lt;path_to_eigen_build_dir&gt; [-DCMAKE_INSTALL_PREFIX=&lt;install_dir&gt;] ..</code></li>
<li><code>make [&amp;&amp; make install]</code></li>
</ol>
<p>This process would generate <code>ir2vec</code> binary under <code>build/bin</code> directory, <code>libIR2Vec.a</code> and <code>libIR2Vec.so</code> under <code>build/lib</code> directory.</p>
<p>To ensure the correctness, run <code>make check_ir2vec</code></p>
<h1><a class="anchor" id="autotoc_md37"></a>
Generating program representations</h1>
<p><code>IR2Vec</code> can be used either as a stand-alone tool using binary or can be integrated with any third-party tools using libraries. Please see below for the usage instructions.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
Using Binary</h2>
<blockquote class="doxtable">
<p>ir2vec -&lt;mode&gt; -dim &lt;dimensions&gt; -o &lt;output-file&gt; -level &lt;p|f&gt; -class &lt;class-number&gt; -funcName=&lt;function-name&gt; &lt;input-ll-file&gt; </p>
</blockquote>
<h3><a class="anchor" id="autotoc_md39"></a>
Command-Line options</h3>
<ul>
<li><code>mode</code> - can be one of <code>sym</code>/<code>fa</code><ul>
<li><code>sym</code> denotes Symbolic representation</li>
<li><code>fa</code> denotes Flow-Aware representation</li>
</ul>
</li>
<li><code>dim</code> - Dimensions of embeddings<ul>
<li>This is an optional argument. Defaults to <code>300</code>.</li>
<li>Other supported dimensions are <code>75</code> and <code>100</code></li>
</ul>
</li>
<li><code>o</code> - file in which the embeddings are to be appended; (Note : If file doesnâ€™t exist, new file would be created, else embeddings would be appended)</li>
<li><code>level</code> - can be one of chars <code>p</code>/<code>f</code>.<ul>
<li><code>p</code> denotes <code>program level</code> encoding</li>
<li><code>f</code> denotes <code>function level</code> encoding</li>
</ul>
</li>
<li><code>class</code> - non-mandatory argument. Used for the purpose of mentioning class labels for <em>classification tasks</em> (To be used with the <code>level p</code>). Defaults to <em>-1</em>. When, not equal to -1, the pass prints <code>class-number</code> followed by the corresponding embeddings</li>
<li><code>funcName</code> - also a non-mandatory argument. Used for generating embeddings only for the functions with given name. <code>level</code> should be <code>f</code> while using this option</li>
</ul>
<p>Please use <code>--help</code> for further details.</p>
<p><b>Format of the output embeddings in <code>output_file</code></b></p><ul>
<li>If the <code>level</code> is <code>p</code>:</li>
</ul>
<blockquote class="doxtable">
<p>&lt;class-number&gt; &lt;Embeddings&gt; <em>class-number would be printed only if it is not -1</em> </p>
</blockquote>
<ul>
<li>If the <code>level</code> is <code>f</code></li>
</ul>
<blockquote class="doxtable">
<p>&lt;function-name&gt; = &lt;Embeddings&gt; </p>
</blockquote>
<h3><a class="anchor" id="autotoc_md40"></a>
Flow-Aware Embeddings</h3>
<p>For all functions</p><ul>
<li><code>ir2vec -fa -dim &lt;dimension&gt; -o &lt;output_file&gt; -level &lt;p|f&gt; -class &lt;class-number&gt; &lt;input_ll_file&gt;</code></li>
</ul>
<p>For a specific function</p><ul>
<li><code>ir2vec -fa -dim &lt;dimension&gt; -o &lt;output_file&gt; -level f -class &lt;class-number&gt; -funcName=\&lt;function-name\&gt;&lt;input_ll_file&gt;</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md41"></a>
Symbolic Embeddings</h3>
<p>For all functions</p><ul>
<li><code>ir2vec -sym -dim &lt;dimension&gt; -o &lt;output_file&gt; -level &lt;p|f&gt; -class &lt;class-number&gt; &lt;input_ll_file&gt;</code> For a specific function</li>
<li><code>ir2vec -sym -dim &lt;dimension&gt; -o &lt;output_file&gt; -level f -class &lt;class-number&gt; -funcName=\&lt;function-name\&gt; &lt;input_ll_file&gt;</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md42"></a>
Using Libraries</h1>
<p>The libraries can be installed by passing the installation location to the <code>CMAKE_INSTALL_PREFIX</code> flag during <code>cmake</code> followed by <code>make install</code>. The interfaces are available in <a href="./src/include/IR2Vec.h"><code>IR2Vec.h</code></a>. External projects that would like to use <code>IR2Vec</code> can access the functionality using these exposed interfaces on including <code><a class="el" href="IR2Vec_8h_source.html">IR2Vec.h</a></code> from the installed location after linking statically or dynamically.</p>
<ul>
<li>If the project does not use LLVM, LLVM dependencies have to be linked and included separately.</li>
<li>Please ensure that the IR2Vec libraries are compiled with compatible LLVM.<ul>
<li>If you are getting errors, please recompile IR2Vec by passing the current LLVM install directory path to <code>LT_LLVM_INSTALL_DIR</code> during cmake.</li>
</ul>
</li>
</ul>
<p>The following template can be used to link IR2vec libraries on a cmake based project.</p>
<div class="fragment"><div class="line">set(IR2VEC_INSTALL_DIR &quot;&quot; CACHE PATH &quot;IR2Vec installation directory&quot;)</div>
<div class="line">include_directories(&quot;${IR2VEC_INSTALL_DIR}/include&quot;)</div>
<div class="line">target_link_libraries(&lt;your_executable_or_library&gt; PUBLIC ${IR2VEC_INSTALL_DIR}/lib/&lt;libIR2Vec.a or libIR2Vec.so&gt;)</div>
</div><!-- fragment --><p>And then pass the location of IR2Vec's install prefix to <code>DIR2VEC_INSTALL_DIR</code> during cmake.</p>
<p>The following example snippet shows how to query the exposed vector representations.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;IR2Vec.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Creating object to generate FlowAware representation</span></div>
<div class="line"><span class="keyword">auto</span> ir2vec =</div>
<div class="line">      <a class="code hl_class" href="classIR2Vec_1_1Embeddings.html">IR2Vec::Embeddings</a>(&lt;LLVM Module&gt;, IR2Vec::IR2VecMode::FlowAware, &lt;DIM&gt;);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Getting Instruction vectors corresponding to the instructions in &lt;LLVM Module&gt;</span></div>
<div class="line"><span class="keyword">auto</span> instVecMap = ir2vec.getInstVecMap();</div>
<div class="line"><span class="comment">// Access the generated vectors</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> instVec : instVecMap) {</div>
<div class="line">    outs() &lt;&lt; <span class="stringliteral">&quot;Instruction : &quot;</span>;</div>
<div class="line">    instVec.first-&gt;print(outs());</div>
<div class="line">    outs() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> val : instVec.second)</div>
<div class="line">      outs() &lt;&lt; val &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Getting vectors corresponding to the functions in &lt;LLVM Module&gt;</span></div>
<div class="line"><span class="keyword">auto</span> funcVecMap = ir2vec.getFunctionVecMap();</div>
<div class="line"><span class="comment">// Access the generated vectors</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> funcVec : funcVecMap) {</div>
<div class="line">    outs() &lt;&lt; <span class="stringliteral">&quot;Function : &quot;</span> &lt;&lt; funcVec.first-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> val : funcVec.second)</div>
<div class="line">      outs() &lt;&lt; val &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Getting the program vector</span></div>
<div class="line"><span class="keyword">auto</span> pgmVec = ir2vec.getProgramVector();</div>
<div class="line"><span class="comment">// Access the generated vector</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> val : pgmVec)</div>
<div class="line">    outs() &lt;&lt; val &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="ttc" id="aclassIR2Vec_1_1Embeddings_html"><div class="ttname"><a href="classIR2Vec_1_1Embeddings.html">IR2Vec::Embeddings</a></div><div class="ttdef"><b>Definition</b> IR2Vec.h:21</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md43"></a>
Using Python package (IR2Vec-Wheels)</h1>
<h2><a class="anchor" id="autotoc_md44"></a>
Initialization -ir2vec.initEmbedding</h2>
<p><b>Description:</b> Initialize IR2Vec embedding for an LLVM IR file.</p>
<p><b>Parameters:</b></p>
<ul>
<li><code>file_path</code>: str - Path to the <code>.ll</code> or <code>.bc</code> file.</li>
<li><code>encoding_type</code>: str - Choose <code>fa</code> (Flow-Aware) or <code>sym</code> (Symbolic).</li>
<li><code>level</code>: str - Choose <code>p</code> for program-level or <code>f</code> for function-level.</li>
<li><code>dim</code>: uint - Choose from <code>[300, 100, 75]</code>. Default value is <code>300</code></li>
<li><code>output_file</code>: str - If provided, embeddings are saved to this file. Default is an empty string.</li>
</ul>
<p><b>Returns:</b></p>
<ul>
<li><code>IR2VecObject</code>: Initialized object for accessing embeddings.</li>
</ul>
<p><b>Example:</b></p>
<div class="fragment"><div class="line"><span class="keyword">import</span> ir2vec</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Approach 1</span></div>
<div class="line">initObj = ir2vec.initEmbedding(<span class="stringliteral">&quot;/path/to/file.ll&quot;</span>, <span class="stringliteral">&quot;fa&quot;</span>, <span class="stringliteral">&quot;p&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Approach 2</span></div>
<div class="line">initObj = ir2vec.initEmbedding(<span class="stringliteral">&quot;/path/to/file.ll&quot;</span>, <span class="stringliteral">&quot;fa&quot;</span>, <span class="stringliteral">&quot;p&quot;</span>, 100)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Approach 3</span></div>
<div class="line">initObj = ir2vec.initEmbedding(<span class="stringliteral">&quot;/path/to/file.ll&quot;</span>, <span class="stringliteral">&quot;fa&quot;</span>, <span class="stringliteral">&quot;p&quot;</span>, 100, <span class="stringliteral">&quot;output.txt&quot;</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md45"></a>
getProgramVector</h2>
<p><b>Description:</b> Gets the program-level vector representation.</p>
<p><b>Parameters:</b> optional</p>
<p><b>Returns:</b></p>
<ul>
<li><code>progVector</code>: ndarray - The program-level embedding vector.</li>
</ul>
<p><b>Example:</b></p>
<div class="fragment"><div class="line"><span class="comment"># Getting the program-level vector</span></div>
<div class="line">progVector = initObj.getProgramVector()</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md46"></a>
getFunctionVectors</h2>
<p><b>Description:</b> Gets function-level vectors for all functions in the LLVM IR file.</p>
<p><b>Parameters:</b> optional</p>
<p><b>Returns:</b></p>
<ul>
<li><code>functionVectorMap</code>: dict - A dictionary where keys are function names and values are ndarrays containing function-level embedding vectors.</li>
</ul>
<p><b>Example:</b></p>
<div class="fragment"><div class="line"><span class="comment"># Getting function-level vectors</span></div>
<div class="line">functionVectorMap = initObj.getFunctionVectors()</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md47"></a>
getInstructionVectors</h2>
<p><b>Description:</b> Gets instruction-level vectors for all instructions in the LLVM IR file.</p>
<p><b>Parameters:</b> optional</p>
<p><b>Returns:</b></p>
<ul>
<li><code>instructionVectorsList</code>: list - A list of list where each list contains instruction corresponding embedding vectors as values.</li>
</ul>
<p><b>Example:</b></p>
<div class="fragment"><div class="line"><span class="comment"># Getting instruction-level vectors</span></div>
<div class="line">instructionVectorsList = initObj.getInstructionVectors()</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md48"></a>
Example</h1>
<ul>
<li>The following code snippet contains an example to demonstrate the usage of the package.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">import</span> ir2vec</div>
<div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"> </div>
<div class="line"><span class="comment"># IR2Vec Python APIs can be used in two ways. As shown below.</span></div>
<div class="line">initObj = ir2vec.initEmbedding(<span class="stringliteral">&quot;/path/to/file.ll&quot;</span>, <span class="stringliteral">&quot;fa&quot;</span>, <span class="stringliteral">&quot;p&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment">#Approach 1</span></div>
<div class="line">progVector1 = ir2vec.getProgramVector(initObj)</div>
<div class="line">functionVectorMap1 = ir2vec.getFunctionVectors(initObj)</div>
<div class="line">instructionVectorsList1 = ir2vec.getInstructionVectors(initObj)</div>
<div class="line"> </div>
<div class="line"><span class="comment">#Approach 2</span></div>
<div class="line">progVector2 = initObj.getProgramVector()</div>
<div class="line">functionVectorMap2 = initObj.getFunctionVectors()</div>
<div class="line">instructionVectorsList2 = initObj.getInstructionVectors()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Both the approaches would result in same outcomes</span></div>
<div class="line">assert(np.allclose(progVector1,progVector2))</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> fun, funcObj <span class="keywordflow">in</span> functionVectorMap1.items():</div>
<div class="line">    <span class="keyword">assert</span> fun == funcObj[<span class="stringliteral">&quot;demangledName&quot;</span>]</div>
<div class="line">    functionOutput1 = ir2vec.getFunctionVectors(</div>
<div class="line">        initObj,</div>
<div class="line">        funcObj[<span class="stringliteral">&quot;actualName&quot;</span>],</div>
<div class="line">    )</div>
<div class="line">    functionOutput2 = initObj.getFunctionVectors(</div>
<div class="line">        funcObj[<span class="stringliteral">&quot;actualName&quot;</span>]</div>
<div class="line">    )</div>
<div class="line">    assert(np.allclose(functionOutput1[fun][<span class="stringliteral">&quot;vector&quot;</span>],functionOutput2[fun][<span class="stringliteral">&quot;vector&quot;</span>]))</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md49"></a>
Binaries, Libraries and Wheels - Artifacts</h1>
<p>Binaries, Libraries (.a and .so), and whl files are autogenerated for every relevant check-in using GitHub Actions. Such generated artifacts are tagged along with the successful runs of <a href="https://github.com/IITH-Compilers/IR2Vec/actions?query=workflow%3APublish"><code>Publish</code></a> and <a href="https://github.com/IITH-Compilers/IR2Vec/actions/workflows/wheel.yml"><code>Build Wheels</code></a> actions.</p>
<h1><a class="anchor" id="autotoc_md50"></a>
Experiments</h1>
<h2><a class="anchor" id="autotoc_md51"></a>
Note</h2>
<p><code> The results mentioned in the experiment's scripts/the published version are not updated for this branch. The experimental results for this branch would be different when compared to the published version. For comparison, use the release corresponding to <a href="https://github.com/IITH-Compilers/IR2Vec/releases/tag/v0.1.0">v0.1.0</a>. </code></p>
<ul>
<li><a href="./experiments/Device_Mapping">Device Mapping</a></li>
<li><a href="./experiments/Thread_Coarsening">Thread Coarsening</a></li>
<li><a href="./experiments/Out_Of_Vocabulary">OOV</a></li>
<li><a href="./experiments/TimeTaken">Time Taken</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md52"></a>
Citation</h1>
<div class="fragment"><div class="line">@article{VenkataKeerthy-2020-IR2Vec,</div>
<div class="line">author = {VenkataKeerthy, S. and Aggarwal, Rohit and Jain, Shalini and Desarkar, Maunendra Sankar and Upadrasta, Ramakrishna and Srikant, Y. N.},</div>
<div class="line">title = {{IR2Vec: LLVM IR Based Scalable Program Embeddings}},</div>
<div class="line">year = {2020},</div>
<div class="line">issue_date = {December 2020},</div>
<div class="line">publisher = {Association for Computing Machinery},</div>
<div class="line">address = {New York, NY, USA},</div>
<div class="line">volume = {17},</div>
<div class="line">number = {4},</div>
<div class="line">issn = {1544-3566},</div>
<div class="line">url = {https://doi.org/10.1145/3418463},</div>
<div class="line">doi = {10.1145/3418463},</div>
<div class="line">journal = {ACM Trans. Archit. Code Optim.},</div>
<div class="line">month = dec,</div>
<div class="line">articleno = {32},</div>
<div class="line">numpages = {27},</div>
<div class="line">keywords = {heterogeneous systems, representation learning, compiler optimizations, LLVM, intermediate representations}</div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md53"></a>
Contributions</h1>
<p>Please feel free to raise issues to file a bug, pose a question, or initiate any related discussions. Pull requests are welcome :)</p>
<h1><a class="anchor" id="autotoc_md54"></a>
License</h1>
<p>IR2Vec is released under a Apache License v2.0 with LLVM Exceptions License. See the LICENSE file for more details. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
